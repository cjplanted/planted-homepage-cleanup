<!DOCTYPE html><html lang="en" data-astro-cid-j7pv25f6> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="robots" content="noindex"><title>Planted - Redirecting...</title><link rel="icon" type="image/svg+xml" href="/planted-homepage-cleanup/favicon.svg"><!-- Noscript fallback --><noscript><meta http-equiv="refresh" content="0;url=/planted-homepage-cleanup/ch-de/"><style>
            .loader { display: none; }
        </style></noscript><style>[data-astro-cid-j7pv25f6]{margin:0;padding:0;box-sizing:border-box}body{min-height:100vh;min-height:100dvh;display:flex;align-items:center;justify-content:center;background:#fdf8f3;font-family:Galano Grotesque,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.loader[data-astro-cid-j7pv25f6]{text-align:center;padding:2rem}.logo[data-astro-cid-j7pv25f6]{width:120px;height:auto;margin-bottom:1.5rem;animation:pulse 1.5s ease-in-out infinite}@keyframes pulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(.98)}}.loading-text[data-astro-cid-j7pv25f6]{font-size:.9rem;color:#61269e;opacity:.7}.loading-dots[data-astro-cid-j7pv25f6]:after{content:"";animation:dots 1.5s steps(4,end) infinite}@keyframes dots{0%{content:""}25%{content:"."}50%{content:".."}75%{content:"..."}}.no-js-fallback[data-astro-cid-j7pv25f6]{display:none;margin-top:2rem}.no-js-fallback[data-astro-cid-j7pv25f6] a[data-astro-cid-j7pv25f6]{display:inline-block;background:#61269e;color:#fff;padding:.75rem 1.5rem;border-radius:100px;text-decoration:none;font-weight:600;transition:transform .2s,box-shadow .2s}.no-js-fallback[data-astro-cid-j7pv25f6] a[data-astro-cid-j7pv25f6]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #61269e4d}
</style></head> <body data-astro-cid-j7pv25f6> <div class="loader" data-astro-cid-j7pv25f6> <!-- Planted Logo SVG --> <svg class="logo" viewBox="0 0 120 40" fill="none" xmlns="http://www.w3.org/2000/svg" data-astro-cid-j7pv25f6> <text x="0" y="30" font-family="serif" font-size="28" font-weight="700" fill="#61269E" data-astro-cid-j7pv25f6>planted.</text> </svg> <p class="loading-text" data-astro-cid-j7pv25f6>Detecting your location<span class="loading-dots" data-astro-cid-j7pv25f6></span></p> <!-- Fallback for slow connections --> <div class="no-js-fallback" id="fallback" data-astro-cid-j7pv25f6> <p style="margin-bottom: 1rem; font-size: 0.85rem; color: #666;" data-astro-cid-j7pv25f6>Taking too long?</p> <a href="/planted-homepage-cleanup/ch-de/" data-astro-cid-j7pv25f6>Continue to site</a> </div> </div> <script>(function(){const base = "/planted-homepage-cleanup";
const defaultLocale = "ch-de";

        // Show fallback link after 3 seconds
        setTimeout(() => {
            const fallback = document.getElementById('fallback');
            if (fallback) fallback.style.display = 'block';
        }, 3000);

        // Locale detection and redirect
        (async function detectAndRedirect() {
            const LOCALE_STORAGE_KEY = 'planted_locale_preference';

            // Valid locales
            const validLocales = [
                'global', 'ch-de', 'ch-fr', 'ch-it', 'ch-en',
                'de', 'de-en', 'at', 'at-en', 'it', 'it-en',
                'fr', 'fr-en', 'nl', 'nl-en', 'uk', 'es', 'es-en'
            ];

            // Country code mapping
            const COUNTRY_CODE_MAP = {
                'CH': 'ch', 'DE': 'de', 'AT': 'at', 'FR': 'fr',
                'IT': 'it', 'NL': 'nl', 'GB': 'uk', 'UK': 'uk', 'ES': 'es'
            };

            // Browser language mapping
            const BROWSER_LANG_MAP = {
                'de': 'de', 'de-DE': 'de', 'de-AT': 'de', 'de-CH': 'de',
                'fr': 'fr', 'fr-FR': 'fr', 'fr-CH': 'fr', 'fr-BE': 'fr',
                'it': 'it', 'it-IT': 'it', 'it-CH': 'it',
                'nl': 'nl', 'nl-NL': 'nl', 'nl-BE': 'nl',
                'en': 'en', 'en-US': 'en', 'en-GB': 'en', 'en-AU': 'en',
                'es': 'es', 'es-ES': 'es', 'es-MX': 'es', 'es-AR': 'es'
            };

            // Country + language to locale mapping
            const COUNTRY_LOCALE_MAP = {
                'ch': { 'de': 'ch-de', 'fr': 'ch-fr', 'it': 'ch-it', 'en': 'ch-en', 'nl': 'ch-de', 'es': 'ch-en' },
                'de': { 'de': 'de', 'en': 'de-en', 'fr': 'de-en', 'it': 'de-en', 'nl': 'de', 'es': 'de-en' },
                'at': { 'de': 'at', 'en': 'at-en', 'fr': 'at-en', 'it': 'at-en', 'nl': 'at', 'es': 'at-en' },
                'fr': { 'fr': 'fr', 'en': 'fr-en', 'de': 'fr-en', 'it': 'fr-en', 'nl': 'fr-en', 'es': 'fr-en' },
                'it': { 'it': 'it', 'en': 'it-en', 'de': 'it-en', 'fr': 'it-en', 'nl': 'it-en', 'es': 'it-en' },
                'nl': { 'nl': 'nl', 'en': 'nl-en', 'de': 'nl', 'fr': 'nl-en', 'it': 'nl-en', 'es': 'nl-en' },
                'uk': { 'en': 'uk', 'de': 'uk', 'fr': 'uk', 'it': 'uk', 'nl': 'uk', 'es': 'uk' },
                'es': { 'es': 'es', 'en': 'es-en', 'de': 'es-en', 'fr': 'es-en', 'it': 'es-en', 'nl': 'es-en' },
                'global': { 'en': 'global', 'de': 'ch-de', 'fr': 'fr', 'it': 'it', 'nl': 'nl', 'es': 'es' }
            };

            // Language defaults when country unknown
            const LANGUAGE_DEFAULT_LOCALE = {
                'de': 'de', 'fr': 'fr', 'it': 'it', 'nl': 'nl', 'en': 'global', 'es': 'es'
            };

            function redirect(locale) {
                window.location.replace(base + '/' + locale + '/');
            }

            // 1. Check for saved preference
            try {
                const saved = localStorage.getItem(LOCALE_STORAGE_KEY);
                if (saved && validLocales.includes(saved)) {
                    redirect(saved);
                    return;
                }
            } catch (e) {}

            // 2. Get browser language
            function parseBrowserLanguage(lang) {
                if (BROWSER_LANG_MAP[lang]) return BROWSER_LANG_MAP[lang];
                const baseLang = lang.split('-')[0].toLowerCase();
                return BROWSER_LANG_MAP[baseLang] || 'en';
            }

            const browserLang = navigator.language || 'en';
            const language = parseBrowserLanguage(browserLang);

            // 3. Try to infer country from browser locale
            function inferCountry(lang) {
                const parts = lang.split('-');
                if (parts.length > 1) {
                    const region = parts[1].toUpperCase();
                    return COUNTRY_CODE_MAP[region] || null;
                }
                return null;
            }

            let country = inferCountry(browserLang);

            // 4. Try IP geolocation (with timeout)
            if (!country) {
                try {
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 2000);

                    const response = await fetch('https://ip-api.com/json/?fields=countryCode', {
                        signal: controller.signal
                    });
                    clearTimeout(timeoutId);

                    if (response.ok) {
                        const data = await response.json();
                        if (data.countryCode && COUNTRY_CODE_MAP[data.countryCode]) {
                            country = COUNTRY_CODE_MAP[data.countryCode];
                        }
                    }
                } catch (e) {
                    // Geolocation failed - continue without country
                }
            }

            // 5. Determine best locale
            let bestLocale = defaultLocale;

            if (country && COUNTRY_LOCALE_MAP[country]) {
                const countryMap = COUNTRY_LOCALE_MAP[country];
                bestLocale = countryMap[language] || countryMap['en'] || defaultLocale;
            } else {
                bestLocale = LANGUAGE_DEFAULT_LOCALE[language] || 'global';
            }

            // 6. Redirect
            redirect(bestLocale);
        })();
    })();</script> </body> </html>