---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import { allLocales, locales, type LocaleCode } from '../../i18n/config';
import { getTranslations } from '../../i18n/index';

export async function getStaticPaths() {
    return allLocales.map((locale) => ({
        params: { locale },
        props: { locale },
    }));
}

const { locale } = Astro.props as { locale: LocaleCode };
const base = import.meta.env.BASE_URL;
const t = getTranslations(locale);
const localeData = locales[locale];

const team = await getCollection('team');
const sortedTeam = team.sort((a, b) => a.data.order - b.data.order);
---

<Layout title={`${t.ourStory.pageTitle} ‚Äì Planted`} currentPage="our-story" locale={locale}>
    <section class="hero">
        <h1>{t.ourStory.hero.title}. <span>{t.home.mission.highlight}</span></h1>
        <p>{t.ourStory.hero.subtitle}</p>
    </section>

    <section class="story-section">
        <div class="story-content">
            <div class="story-block reveal">
                <h2>{t.about.story.title}</h2>
                <p>{t.about.story.text}</p>
            </div>
            <div class="story-block reveal">
                <h2>{t.about.mission.title}</h2>
                <p>{t.about.mission.text}</p>
            </div>
        </div>
    </section>

    <section class="image-section">
        <div class="image-grid">
            <div class="image-card reveal-scale"><img src="https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=800&q=80" alt="Production"></div>
            <div class="image-card reveal-scale"><img src="https://images.unsplash.com/photo-1581349485608-9469926a8e5e?w=800&q=80" alt="Team"></div>
            <div class="image-card reveal-scale"><img src="https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800&q=80" alt="Food"></div>
        </div>
    </section>

    <section class="values-section">
        <div class="values-header">
            <h2 class="reveal">{t.ourStory.values.title}</h2>
            <p class="reveal">{t.about.values.title}</p>
        </div>
        <div class="values-grid">
            <div class="value-card reveal-scale">
                <div class="value-icon">üåç</div>
                <div class="value-title">{t.ourStory.values.planetFirst}</div>
                <div class="value-description">{t.ourStory.values.planetFirstDesc}</div>
            </div>
            <div class="value-card reveal-scale">
                <div class="value-icon">üòã</div>
                <div class="value-title">{t.ourStory.values.tasteOverEverything}</div>
                <div class="value-description">{t.ourStory.values.tasteOverEverythingDesc}</div>
            </div>
            <div class="value-card reveal-scale">
                <div class="value-icon">üî¨</div>
                <div class="value-title">{t.ourStory.values.scienceDriven}</div>
                <div class="value-description">{t.ourStory.values.scienceDrivenDesc}</div>
            </div>
            <div class="value-card reveal-scale">
                <div class="value-icon">üíö</div>
                <div class="value-title">{t.ourStory.values.noWeirdStuff}</div>
                <div class="value-description">{t.ourStory.values.noWeirdStuffDesc}</div>
            </div>
        </div>
    </section>

    <section class="timeline-section">
        <div class="timeline-header">
            <h2 class="reveal">{t.ourStory.timeline.title}</h2>
        </div>
        <div class="timeline">
            <div class="timeline-item reveal">
                <div class="timeline-year">2019</div>
                <div class="timeline-content">
                    <h3>The Beginning</h3>
                    <p>Four friends start experimenting in a small lab in Zurich.</p>
                </div>
            </div>
            <div class="timeline-item reveal">
                <div class="timeline-year">2020</div>
                <div class="timeline-content">
                    <h3>First Product Launch</h3>
                    <p>planted.chicken hits Swiss shelves. Sells out in days.</p>
                </div>
            </div>
            <div class="timeline-item reveal">
                <div class="timeline-year">2021</div>
                <div class="timeline-content">
                    <h3>B Corp Certified</h3>
                    <p>We officially become a certified B Corporation.</p>
                </div>
            </div>
            <div class="timeline-item reveal">
                <div class="timeline-year">2022</div>
                <div class="timeline-content">
                    <h3>European Expansion</h3>
                    <p>Launched in Germany, Austria, and the UK.</p>
                </div>
            </div>
            <div class="timeline-item reveal">
                <div class="timeline-year">2023</div>
                <div class="timeline-content">
                    <h3>planted.steak</h3>
                    <p>World's first fermented whole-cut plant-based steak.</p>
                </div>
            </div>
            <div class="timeline-item reveal">
                <div class="timeline-year">2024</div>
                <div class="timeline-content">
                    <h3>8,000+ Restaurants</h3>
                    <p>From Michelin stars to street food vendors.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="bcorp-section">
        <div class="bcorp-badge reveal-scale">B CORP</div>
        <h2 class="reveal">{t.products.badges.bCorp}</h2>
        <p class="reveal">{t.about.values.sustainabilityText}</p>
    </section>

    <section class="team-section">
        <div class="team-header">
            <h2 class="reveal">Meet the founders</h2>
            <p class="reveal">Four friends on a mission to change the world.</p>
        </div>
        <div class="team-grid">
            {sortedTeam.map((member) => (
                <div class="team-card reveal-scale">
                    <div class="team-photo"><img src={member.data.photo} alt={member.data.name}></div>
                    <div class="team-name">{member.data.name}</div>
                    <div class="team-role">{member.data.role}</div>
                </div>
            ))}
        </div>
    </section>

    <section class="cta-section">
        <h2>{t.ourStory.cta.ready}</h2>
        <p>{t.products.cta.subtitle}</p>
        <a href={`${base}/${locale}/#locator`} class="btn btn-green">üìç {t.ourStory.cta.find}</a>
    </section>
</Layout>

<style>
    .hero {
        padding: 8rem 1.5rem 4rem;
        text-align: center;
        max-width: 900px;
        margin: 0 auto;
    }

    .hero h1 {
        font-size: clamp(2.5rem, 10vw, 5rem);
        color: var(--planted-purple);
        margin-bottom: 1.5rem;
        line-height: 1;
    }

    .hero h1 span {
        color: var(--planted-green);
    }

    .hero p {
        font-size: 1.2rem;
        line-height: 1.7;
        opacity: 0.8;
        max-width: 600px;
        margin: 0 auto;
    }

    .story-section {
        padding: 4rem 1.5rem;
    }

    .story-content {
        max-width: 800px;
        margin: 0 auto;
    }

    .story-block {
        margin-bottom: 4rem;
    }

    .story-block h2 {
        font-size: clamp(1.8rem, 6vw, 2.5rem);
        color: var(--planted-purple);
        margin-bottom: 1rem;
    }

    .story-block p {
        font-size: 1.1rem;
        line-height: 1.8;
        opacity: 0.8;
        margin-bottom: 1rem;
    }

    .image-section {
        padding: 2rem 1.5rem 4rem;
    }

    .image-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
        max-width: 1200px;
        margin: 0 auto;
    }

    .image-card {
        border-radius: 1.5rem;
        overflow: hidden;
        aspect-ratio: 4/3;
    }

    .image-card img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .values-section {
        background: var(--planted-purple);
        padding: 5rem 1.5rem;
        color: white;
    }

    .values-header {
        text-align: center;
        margin-bottom: 3rem;
    }

    .values-header h2 {
        font-size: clamp(2rem, 8vw, 3.5rem);
        margin-bottom: 1rem;
    }

    .values-header p {
        opacity: 0.8;
        max-width: 500px;
        margin: 0 auto;
    }

    .values-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        max-width: 1000px;
        margin: 0 auto;
    }

    .value-card {
        background: rgba(255,255,255,0.1);
        padding: 2rem;
        border-radius: 1.25rem;
    }

    .value-icon {
        font-size: 2.5rem;
        margin-bottom: 1rem;
    }

    .value-title {
        font-family: 'VC Henrietta', serif;
        font-size: 1.3rem;
        margin-bottom: 0.5rem;
    }

    .value-description {
        opacity: 0.8;
        font-size: 0.95rem;
        line-height: 1.6;
    }

    .timeline-section {
        padding: 5rem 1.5rem;
    }

    .timeline-header {
        text-align: center;
        margin-bottom: 3rem;
    }

    .timeline-header h2 {
        font-size: clamp(2rem, 8vw, 3rem);
        color: var(--planted-purple);
    }

    .timeline {
        max-width: 700px;
        margin: 0 auto;
    }

    .timeline-item {
        display: flex;
        gap: 1.5rem;
        margin-bottom: 2.5rem;
    }

    .timeline-year {
        font-family: 'VC Henrietta', serif;
        font-size: 1.5rem;
        color: var(--planted-purple);
        min-width: 80px;
    }

    .timeline-content h3 {
        font-family: 'VC Henrietta', serif;
        color: var(--planted-purple);
        font-size: 1.2rem;
        margin-bottom: 0.5rem;
    }

    .timeline-content p {
        opacity: 0.7;
        line-height: 1.6;
    }

    .bcorp-section {
        background: var(--planted-green);
        padding: 5rem 1.5rem;
        text-align: center;
    }

    .bcorp-badge {
        width: 100px;
        height: 100px;
        margin: 0 auto 2rem;
        background: var(--planted-black);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 700;
        font-size: 0.8rem;
    }

    .bcorp-section h2 {
        font-size: clamp(1.8rem, 6vw, 2.5rem);
        color: var(--planted-black);
        margin-bottom: 1rem;
    }

    .bcorp-section p {
        color: var(--planted-black);
        opacity: 0.8;
        max-width: 500px;
        margin: 0 auto;
        line-height: 1.7;
    }

    .team-section {
        padding: 5rem 1.5rem;
    }

    .team-header {
        text-align: center;
        margin-bottom: 3rem;
    }

    .team-header h2 {
        font-size: clamp(2rem, 8vw, 3rem);
        color: var(--planted-purple);
        margin-bottom: 0.5rem;
    }

    .team-header p {
        opacity: 0.7;
    }

    .team-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 2rem;
        max-width: 900px;
        margin: 0 auto;
    }

    .team-card {
        text-align: center;
    }

    .team-photo {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        margin: 0 auto 1rem;
        overflow: hidden;
        background: var(--planted-purple);
    }

    .team-photo img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .team-name {
        font-family: 'VC Henrietta', serif;
        color: var(--planted-purple);
        font-size: 1.2rem;
    }

    .team-role {
        opacity: 0.7;
        font-size: 0.9rem;
    }

    .cta-section {
        background: var(--planted-cream);
        padding: 5rem 1.5rem;
        text-align: center;
    }

    .cta-section h2 {
        font-size: clamp(2rem, 6vw, 3rem);
        color: var(--planted-purple);
        margin-bottom: 1rem;
    }

    .cta-section p {
        opacity: 0.7;
        margin-bottom: 2rem;
    }

    @media (min-width: 1024px) {
        .hero {
            padding: 10rem 3rem 5rem;
        }

        .story-section {
            padding: 5rem 3rem;
        }
    }
</style>
