/**
 * Animation Utilities
 * Scroll-driven animation classes for Planted website
 *
 * IMPORTANT: This file only adds animation utilities.
 * DO NOT modify colors or override global.css variables.
 */

/* ==========================================================================
   Data-Attribute Animation System
   ========================================================================== */

/* Initial state for all animated elements */
[data-animate] {
  opacity: 0;
}

/* Fade up animation (default) */
[data-animate="fade-up"] {
  transform: translateY(40px);
}

/* Fade in with subtle scale */
[data-animate="fade-in"] {
  transform: scale(0.98);
}

/* Slide from left */
[data-animate="slide-left"] {
  transform: translateX(60px);
}

/* Slide from right */
[data-animate="slide-right"] {
  transform: translateX(-60px);
}

/* Scale up from center */
[data-animate="scale-up"] {
  transform: scale(0.9);
}

/* Active state after animation triggers */
[data-animate].is-visible {
  opacity: 1;
  transform: none;
  transition:
    opacity 0.8s var(--ease-out-expo, cubic-bezier(0.16, 1, 0.3, 1)),
    transform 0.8s var(--ease-out-expo, cubic-bezier(0.16, 1, 0.3, 1));
}

/* Stagger delay classes */
[data-animate][data-delay="0.1"] { transition-delay: 0.1s; }
[data-animate][data-delay="0.2"] { transition-delay: 0.2s; }
[data-animate][data-delay="0.3"] { transition-delay: 0.3s; }
[data-animate][data-delay="0.4"] { transition-delay: 0.4s; }
[data-animate][data-delay="0.5"] { transition-delay: 0.5s; }

/* ==========================================================================
   GPU Acceleration Hints
   ========================================================================== */

.will-animate {
  will-change: transform, opacity;
}

/* Chapter sections for scroll progress tracking */
[data-chapter] {
  position: relative;
}

/* Parallax elements */
[data-parallax] {
  will-change: transform;
}

/* ==========================================================================
   Scroll Indicator
   ========================================================================== */

.scroll-indicator {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  opacity: 0;
  animation: fadeInScrollCue 0.6s ease 0.8s forwards;
}

.scroll-indicator__text {
  font-size: 0.75rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--planted-charcoal, #2D2D2D);
  opacity: 0.6;
}

.scroll-indicator__arrow {
  width: 24px;
  height: 24px;
  animation: bounceDown 1.5s ease infinite;
}

@keyframes fadeInScrollCue {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes bounceDown {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(8px);
  }
}

/* ==========================================================================
   Sticky/Pinned Sections for Transformation
   ========================================================================== */

.sticky-wrapper {
  position: sticky;
  top: 0;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
}

.sticky-wrapper > * {
  pointer-events: auto;
}

/* Stage transitions */
.stage {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.6s var(--ease-in-out, cubic-bezier(0.65, 0, 0.35, 1));
}

.stage.is-active {
  opacity: 1;
}

.stage img,
.stage video {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  border-radius: var(--border-radius-lg, 24px);
}

/* ==========================================================================
   Scroll Velocity Feedback
   ========================================================================== */

:root {
  --scroll-velocity: 0;
}

.velocity-responsive {
  transition-duration: calc(0.3s + (0.3s * var(--scroll-velocity, 0)));
}

/* ==========================================================================
   Magnetic Button Effect
   ========================================================================== */

[data-magnetic] {
  transition: transform 0.4s var(--ease-out-expo, cubic-bezier(0.16, 1, 0.3, 1));
  will-change: transform;
}

/* ==========================================================================
   Accessibility: Reduced Motion
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
  /* Disable all scroll-driven animations */
  [data-animate] {
    opacity: 1 !important;
    transform: none !important;
  }

  [data-parallax] {
    transform: none !important;
  }

  .scroll-indicator {
    animation: none;
    opacity: 1;
  }

  .scroll-indicator__arrow {
    animation: none;
  }

  /* Instant transitions */
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  /* Disable smooth scroll */
  html {
    scroll-behavior: auto !important;
  }
}

/* ==========================================================================
   Lenis Smooth Scroll Integration
   ========================================================================== */

html.lenis,
html.lenis body {
  height: auto;
}

.lenis.lenis-smooth {
  scroll-behavior: auto !important;
}

.lenis.lenis-smooth [data-lenis-prevent] {
  overscroll-behavior: contain;
}

.lenis.lenis-stopped {
  overflow: hidden;
}

.lenis.lenis-smooth iframe {
  pointer-events: none;
}
